(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d2a8c5b"],{"2ed7":function(t,e,i){"use strict";i.r(e);var c=i("7a23");const s=t=>(Object(c["w"])("data-v-0d20a315"),t=t(),Object(c["u"])(),t),o={class:"cont-box main"},n={class:"cb-left"},a=s(()=>Object(c["f"])("p",{class:"title"},"品类",-1)),l={class:"checkbox-group"},r=["onClick","id","name","onUpdate:modelValue"],b=["for"],d=["for"],p={class:"other"},h=Object(c["h"])(" 其它："),u={class:"cb-right"},f=s(()=>Object(c["f"])("p",{class:"title"},"今天吃什么呐？",-1)),O={class:"wheel"},j=["src"],g={class:"prize",id:"prizeBox"},m={class:"prize-item"},k={class:"draw-txt"},x={class:"start-btn"},v=["src"],L={key:0,class:"tips"};function z(t,e,i,s,z,y){const w=Object(c["B"])("popupAlert");return Object(c["t"])(),Object(c["e"])("div",o,[Object(c["f"])("div",n,[a,Object(c["f"])("div",l,[(Object(c["t"])(!0),Object(c["e"])(c["a"],null,Object(c["z"])(z.foodList,(t,e)=>(Object(c["t"])(),Object(c["e"])("div",{class:"checkbox-item",key:e},[Object(c["K"])(Object(c["f"])("input",{onClick:t=>y.clickCheckbox(t,e,z.foodList),type:"checkbox",id:"xx"+e,name:t.text,"onUpdate:modelValue":e=>t.checkFlag=e},null,8,r),[[c["F"],t.checkFlag]]),Object(c["f"])("label",{for:"xx"+e,class:"ui-checkbox"},null,8,b),Object(c["f"])("label",{for:"xx"+e,class:"ui-label"},Object(c["D"])(t.text),9,d)]))),128))]),Object(c["f"])("div",p,[h,Object(c["K"])(Object(c["f"])("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>z.otherVal=t),class:"other-input"},null,512),[[c["G"],z.otherVal]])]),Object(c["f"])("button",{class:"confirm",onClick:e[1]||(e[1]=(...t)=>y.confirmDataList&&y.confirmDataList(...t))},"确定")]),Object(c["f"])("div",u,[f,Object(c["f"])("div",O,[Object(c["f"])("div",{class:Object(c["o"])(["round",{not_roting:!z.roting}]),style:Object(c["p"])({transition:z.round_time+"ms",transform:"rotate("+z.deg+"deg)"})},[Object(c["f"])("img",{src:z.bgImg,alt:"大转盘",class:"rotate-bgimg"},null,8,j),Object(c["f"])("div",g,[(Object(c["t"])(!0),Object(c["e"])(c["a"],null,Object(c["z"])(z.prizeList,(t,e)=>(Object(c["t"])(),Object(c["e"])("div",{class:"item-box",key:e,style:Object(c["p"])({transform:"rotate("+360/z.prizeList.length*e+"deg)"})},[Object(c["f"])("div",{class:Object(c["o"])(["item-bg",{transparent:e%2!=0}]),style:Object(c["p"])({"border-width":z.sWidth+"px"})},null,6),Object(c["f"])("div",m,[Object(c["f"])("p",k,Object(c["D"])(t.text),1)])],4))),128))])],6),Object(c["f"])("div",x,[Object(c["f"])("img",{src:z.startBtn,alt:"按钮背景",class:"start-img"},null,8,v),Object(c["f"])("button",{class:"rotate-btn",onClick:e[2]||(e[2]=(...t)=>y.startTurn&&y.startTurn(...t))},"转转")])]),z.prizeList.length%2!=0?(Object(c["t"])(),Object(c["e"])("p",L," 注：备选种类再加一种或者再减一种吧！ ")):Object(c["d"])("",!0)]),Object(c["i"])(w,{popupMsg:z.tipsTxt,ref:"tipsPop",onOnclick:y.confirmDinner},null,8,["popupMsg","onOnclick"])])}var y=i("0392"),w=i("be34");const T=i("4007"),D=i("8528");var M={data(){return{foodList:[],otherVal:"",prizeList:[],bgImg:T,startBtn:D,roting:!1,loading:!1,sWidth:100,deg:0,round_time:5e3,tipsTxt:""}},mounted(){this.$nextTick(()=>{this.getData()})},methods:{getData(){y["b"].get("/baseD/food.json").then(t=>{this.foodList=t.data.foodList,this.initPrizeList(this.foodList)}).catch(t=>{console.log(JSON.stringify(t))})},initPrizeList(t){this.prizeList=[];for(let i in t){let e={id:"",text:""};t[i].checkFlag&&(e.id=t[i].id,e.text=t[i].text,this.prizeList.push(e))}let e=2*Math.PI/360*(360/this.prizeList.length/2);this.sWidth=145*Math.sin(e)/Math.cos(e),this.sWidth<0&&(this.sWidth=0)},startTurn(){this.roting||this.loading||(this.loading=!0,setTimeout(()=>{let t=Math.floor(Math.random()*this.prizeList.length),e=this.prizeList[t];this.prizeList.some((t,i)=>{if(t.id===e.id){let t=this.getRote(i,this.prizeList.length);return this.roting=!0,this.deg=t,setTimeout(()=>{this.roting=!1,this.deg=t%360,this.tipsTxt="今天吃"+e.text,this.$refs.tipsPop.show()},this.round_time),!0}}),this.loading=!1},100))},getRote(t,e){e||(e=8);const i=10,c=8,s=0,o=360/e,n=Math.floor(Math.random()*-o)+o/2,a=Math.floor(Math.random()*(i-c+1)+c),l=360*a-o*t;return l+s*n},confirmDinner(){this.$refs.tipsPop.hide()},clickCheckbox(t,e,i){t.stopPropagation(),i[e].checkFlag=!i[e].checkFlag,this.initPrizeList(i)},confirmDataList(){""!=this.otherVal.trim()&&(this.foodList.push({id:this.foodList.length,text:this.otherVal,checkFlag:!0}),this.otherVal="",this.initPrizeList(this.foodList))}},components:{popupAlert:w["a"]}},C=(i("34ef"),i("6b0d")),S=i.n(C);const _=S()(M,[["render",z],["__scopeId","data-v-0d20a315"]]);e["default"]=_},"34ef":function(t,e,i){"use strict";i("b669")},4007:function(t,e,i){t.exports=i.p+"img/bg.7e0793a8.png"},"4e9b":function(t,e,i){},8528:function(t,e,i){t.exports=i.p+"img/start@2x.8942cd94.png"},9024:function(t,e,i){"use strict";i("4e9b")},b669:function(t,e,i){},be34:function(t,e,i){"use strict";var c=i("7a23");const s={key:0},o={class:"popup-box"},n={class:"title"},a={class:"popup-main"},l={class:"msg"},r={key:0,class:"btn-group"};function b(t,e,i,b,d,p){const h=Object(c["B"])("popup-mask");return d.popupAlertShow?(Object(c["t"])(),Object(c["e"])("div",s,[Object(c["f"])("div",o,[Object(c["f"])("h4",n,Object(c["D"])(i.titleTxt),1),Object(c["f"])("i",{class:"i-close",onClick:e[0]||(e[0]=(...t)=>p.hide&&p.hide(...t))}),Object(c["f"])("div",a,[Object(c["f"])("p",l,Object(c["D"])(i.popupMsg),1),Object(c["A"])(t.$slots,"default",{},void 0,!0)]),i.btnGroup?(Object(c["t"])(),Object(c["e"])("div",r,[Object(c["f"])("button",{class:"btn active",onClick:e[1]||(e[1]=(...t)=>p.clickEvent&&p.clickEvent(...t))},Object(c["D"])(i.confirmTxt),1),i.cancelbtn?(Object(c["t"])(),Object(c["e"])("button",{key:0,class:"btn",onClick:e[2]||(e[2]=(...t)=>p.clickCancelEvent&&p.clickCancelEvent(...t))},Object(c["D"])(i.cancelTxt),1)):Object(c["d"])("",!0)])):Object(c["d"])("",!0)]),Object(c["i"])(h)])):Object(c["d"])("",!0)}const d={class:"mask"};function p(t,e,i,s,o,n){return Object(c["t"])(),Object(c["e"])("div",d)}var h={data(){return{}}},u=(i("f8dc"),i("6b0d")),f=i.n(u);const O=f()(h,[["render",p],["__scopeId","data-v-4918f72d"]]);var j=O,g={components:{popupMask:j},props:{titleTxt:{type:String,default:"温馨提示"},popupMsg:{type:String,default:""},btnGroup:{type:[Boolean,String],default:!0},confirmTxt:{type:String,default:"确认"},cancelbtn:{type:[Boolean,String],default:!1},cancelTxt:{type:String,default:"取消"}},data(){return{popupAlertShow:!1}},methods:{show(){this.popupAlertShow=!0},hide(){this.popupAlertShow=!1},clickEvent(){this.$emit("onclick")},clickCancelEvent(){this.$emit("onclickCancel")}}};i("9024");const m=f()(g,[["render",b],["__scopeId","data-v-440c4439"]]);e["a"]=m},d73b:function(t,e,i){},f8dc:function(t,e,i){"use strict";i("d73b")}}]);
//# sourceMappingURL=chunk-4d2a8c5b.f306c47d.js.map